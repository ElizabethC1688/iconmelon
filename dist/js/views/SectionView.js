(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("views/SectionView",["views/ProtoView","models/SectionModel","collectionViews/IconsCollectionView","collections/IconsCollection","underscore"],function(e,n,r,i,s){var o,u;return o=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments),u}return t(o,e),o.prototype.model=n,o.prototype.template="#section-view-template",o.prototype.className="section-b cf h-gm",o.prototype.events={"click #js-hide":"toggleHide","click #js-select-all":"selectAll","click #js-deselect-all":"deSelectAll","click #js-show-more":"toggleExpand"},o.prototype.initialize=function(){return this.bindModelEvents(),o.__super__.initialize.apply(this,arguments),this.listenToOverflow(),this},o.prototype.bindModelEvents=function(){return this.model.on("change:isFiltered",s.bind(this.toggleClasses,this)),this.model.on("change:isClosed",s.bind(this.toggleClasses,this)),this.model.on("change:isExpanded",s.bind(this.toggleClasses,this))},o.prototype.render=function(){var e=this;return o.__super__.render.apply(this,arguments),this.renderIcons(),this.$content=this.$("#js-icons-place"),this.toggleClasses(!1),s.defer(function(){return e.toggleExpandedBtn()}),this.animateIn(),this},o.prototype.listenToOverflow=function(){return $(window).on("resize",s.bind(this.toggleExpandedBtn,this))},o.prototype.isExpandBtnNeeded=function(){return this.$el.hasClass("is-expanded")||this.$content.outerHeight()<this.$content[0].scrollHeight},o.prototype.toggleExpand=function(){return this.model.toggleAttr("isExpanded")},o.prototype.toggleExpandedBtn=function(){return this.$el.toggleClass("is-no-expanded-btn",!this.isExpandBtnNeeded())},o.prototype.onFilter=function(e){return this.toggleExpandedBtn(),this.model.set("isFiltered",e)},o.prototype.renderIcons=function(){return this.iconsCollectionView=new r({$el:this.$("#js-icons-place"),isRender:!0,collection:new i(this.model.get("icons"))}),this.iconsCollectionView.collection.onFilter=s.bind(this.onFilter,this),this.iconsCollectionView.collection.parentModel=this.model,this.model.iconsCollection=this.iconsCollectionView.collection,this.model.iconsCollectionView=this.iconsCollectionView},o.prototype.toggleClasses=function(e){return e==null&&(e=!0),this.$el.toggleClass("is-closed",!!this.model.get("isClosed")),this.$el.toggleClass("h-gm",!!this.model.get("isFiltered")),this.$el.toggleClass("is-expanded",!!this.model.get("isExpanded")),e&&this.toggleExpandedBtn(),this.$("#js-show-more").text(this.model.get("isExpanded")?"show less":"show more")},o.prototype.selectAll=function(){return this.iconsCollectionView.collection.selectAll(),App.vent.trigger("icon:select")},o.prototype.deSelectAll=function(){return this.iconsCollectionView.collection.deSelectAll(),App.vent.trigger("icon:select")},o.prototype.toggleHide=function(){return this.model.toggleAttr("isClosed"),this.$content.slideToggle()},o}(e),o})}).call(this);